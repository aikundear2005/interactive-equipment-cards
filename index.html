<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動式裝備任務卡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        .card-flip {
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card-flip.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .filter-btn {
            transition: all 0.2s ease-in-out;
        }
        .filter-btn.active {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="bg-[#F8F4F0] text-[#4A4A4A]">

    <div id="app" class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[#3A5A40]">SEL 星際奇航 Yes, I Can 裝備任務卡</h1>
            <p class="mt-2 text-lg text-[#588157]">探索登山裝備背後的責任與智慧</p>
        </header>

        <section id="introduction" class="mb-12 bg-white/60 p-6 rounded-2xl shadow-sm">
            <h2 class="text-2xl font-bold text-center mb-4 text-[#3A5A40]">歡迎來到互動式裝備卡</h2>
            <p class="text-center max-w-3xl mx-auto text-gray-700">所有裝備已根據其核心功能，分為三大類別：<strong class="text-[#588157]">A 類（自我管理）</strong>、<strong class="text-[#588157]">B 類（團隊合作）</strong>與<strong class="text-[#588157]">C 類（安全應變）</strong>。您可以點擊下方按鈕篩選特定組別，或點擊任一卡片來深入探索其任務提示。</p>
        </section>

        <section id="chart-section" class="mb-12">
             <div class="chart-container">
                <canvas id="categoryChart"></canvas>
            </div>
        </section>

        <section id="filters" class="mb-8 flex flex-wrap justify-center gap-2 md:gap-4">
        </section>

        <main id="card-gallery" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6">
        </main>

    </div>

    <div id="modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50 hidden">
        <div class="w-full max-w-md h-[70vh] max-h-[500px] perspective-[1000px]">
            <div id="modal-content" class="relative w-full h-full card-flip">
                <div id="modal-front" class="absolute w-full h-full card-face bg-[#F8F4F0] rounded-2xl shadow-xl flex flex-col items-center justify-center p-6 border-4 border-white/50 text-center">
                </div>

                <div id="modal-back" class="absolute w-full h-full card-face card-back bg-[#F8F4F0] rounded-2xl shadow-xl flex flex-col p-6 overflow-y-auto border-4 border-white/50">
                </div>
            </div>
        </div>
        <button id="close-modal-button" class="absolute top-4 right-4 text-white text-4xl leading-none z-10">&times;</button>
        <button id="flip-button" class="absolute bottom-4 left-1/2 -translate-x-1/2 bg-[#3A5A40] text-white px-4 py-2 rounded-full shadow-lg">翻轉卡片</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const equipmentData = [
                { id: 13, name: '水壺', icon: '💧', category: 'A 類（自我管理）', func: '儲存與補充水分，維持體力、預防脫水，是戶外活動中最基本且不可缺的裝備。', symbol: '把自己照顧好，是對團隊最基本的責任。', extension: '負責任的人不會等到出問題才補救，而是願意在日常中就做好準備，照顧好自己。', question: '當你自己累了、煩了，你會找方法讓自己恢復好心情嗎？你也會提醒別人該休息一下嗎？' },
                { id: 20, name: '個人藥物', icon: '💊', category: 'A 類（自我管理）', func: '維持健康，處理自身特殊健康需求，避免危機。', symbol: '了解自己的弱點，反而是最強的自我管理。', extension: '負責任的人照顧自己的健康，避免成為團隊的負擔，也為團體安全盡一份力。', question: '你知道自己的身體或情緒什麼時候最容易出狀況嗎？你有為這些狀況準備嗎？' },
                { id: 4, name: '登山鞋', icon: '👟', category: 'A 類（自我管理）', func: '支撐腳步、保護雙腳行走於困難地形。', symbol: '每一步選擇，踩出你負責的方向。', extension: '負責任的人會為自己選擇正確、穩固的路，而不是走捷徑或冒險。', question: '在學校或家庭中，有時要選擇比較辛苦但對的事（例如認真完成功課、主動做家務），你願意踏出這一步嗎？' },
                { id: 31, name: '個人體力', icon: '💪', category: 'A 類（自我管理）', func: '體能、意志、精神狀態的總合，是完成任務的根本。', symbol: '知道自己的極限，也是一種勇敢與負責。', extension: '負
